## 使用 Systemd 管理应用进程

[Unit]
Description=TX-QM Backend FastAPI Service
After=network.target
Wants=network-online.target

[Service]
# 指定使用 root 用户和组来运行
User=root
Group=root

# 设置工作目录为您的后端代码目录
WorkingDirectory=/var/www/tx-qm

# 运行 uvicorn 的命令，注意这里用了 .venv 里的 python 环境
# 确保这个路径是正确的
ExecStart=/var/www/tx-qm/.venv/bin/uvicorn main:app --host 0.0.0.0 --port 8000

# 加载环境变量文件
EnvironmentFile=/var/www/tx-qm/.env

# 失败后自动重启
Restart=always
RestartSec=3s
StandardOutput=journal
StandardError=journal
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target


        sudo systemctl daemon-reload
        sudo systemctl start tx-qm

systemctl status tx-qm
● tx-qm.service - TX-QM Backend FastAPI Service
     Loaded: loaded (/etc/systemd/system/tx-qm.service; disabled; preset: enabled)
     Active: activating (auto-restart) (Result: exit-code) since Thu 2025-11-13 14:32:55 CST; 983ms ago
    Process: 33377 ExecStart=/var/www/tx-qm/.venv/bin/uvicorn main:app --host 0.0.0.0 --port 8000 (code=exited, status=203/EXEC)
   Main PID: 33377 (code=exited, status=203/EXEC)
        CPU: 2ms
