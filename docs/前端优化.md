### 交互

- ✅ 购物车应该是收起来 不是展开的（已实现：cartDrawerOpen 初始状态为 false）

- ✅ 购物车隐藏掉，不要在首页右上方，改成一个顶部导航的一个特殊tab（已实现：移除右上角购物车按钮，在桌面端和移动端导航中添加购物车tab，链接到 /cart 页面）

### 数据

- ✅ 产品数据表.csv 是面料的数据库（已导入53个产品）

- data/
├── products.json      (53个产品 - 已更新)
├── categories.json    (3个分类 - 已更新)
└── banners.json       (3个轮播图)

- ✅ categories.json 改为三大类：天丝、绣花底布、棉布（已完成）

- ✅ products.json - 产品数据结构已更新，新增字段：
  - productNo: 产品编号（如：801#）
  - whitePrice: 白色价格
  - colorPrice: 彩色价格
  - samplePrice: 版布价格
  - hc: 空差
  - content: 面料成分数组 [{ name: "天丝", percentage: 90 }]

- ✅ 相关页面已按新数据结构展示（已完成）
  - ProductCard 组件
  - CartDrawer 组件
  - 购物车页面
  - 产品详情页面

- ✅ 产品数据表.csv 出现变化 修改价格或者增加新品 同步到网站数据（已实现）

#### 产品数据同步方案：
- **同步脚本：** `scripts/sync-products.js`
- **使用方法：**
  - `node scripts/sync-products.js --dry-run` - 预览模式，查看将要进行的变更
  - `node scripts/sync-products.js` - 执行同步，更新 products.json
- **主要功能：**
  - 自动识别新增产品和价格变更
  - 根据产品编号自动分类（天丝/绣花底布/棉布）
  - 自动备份原数据文件（.backup）
  - 智能保留产品图片、标签等扩展信息
  - 支持批量更新价格、成分、规格等信息
- **详细文档：** 见 `docs/产品数据同步指南.md`

### 数据分类
- 天丝系列（801#-832#）：28个产品
- 绣花底布系列（601#-606#）：6个产品
- 棉布系列（901#-914#）：13个产品

### 图片管理

- ✅ 图片命名规范：`产品编号_图片序号.jpg`（如：801_1.jpg, 802_1.jpg）
- ✅ 图片存储位置：`public/images/products/`
- ✅ 提供图片管理脚本：
  - `scripts/manage-images.js sync` - 自动同步本地图片到 products.json
  - `scripts/manage-images.js list` - 查看产品图片使用情况
  - `scripts/batch-update-images.js` - 批量更新图片链接为本地路径
- 📖 详细说明：见 `docs/图片管理指南.md`

### 价格

- ✅ 产品数据里面是成本价与空差，网页显示的价格需要换算足米价乘以（1+利润率），默认利润率为10%（已实现）
- ✅ 足米 = 空差100（已实现计算公式：显示价格 = 成本价 × (100 / 空差) × (1 + 利润率)）
- ✅ 网页前端不要显示空差值（已移除空差显示）
- ✅ 默认利润率属于一个变量，可以后台改变（已实现配置文件：`lib/config/pricing.ts`，可修改 `DEFAULT_PROFIT_MARGIN` 常量）

#### 价格计算实现细节：
- **配置文件：** `lib/config/pricing.ts`
  - 默认利润率：10% (0.1)
  - 足米基准值：100
  - 提供 `calculateDisplayPrice()` 和 `calculateProductDisplayPrices()` 函数
- **已更新组件：**
  - ProductCard（产品卡片）
  - 产品详情页面
  - 购物车页面
  - 购物车状态管理（store）
- **价格显示逻辑：**
  - 成本价 × (100 / 空差) × (1 + 利润率) = 显示价格
  - 所有价格显示均为计算后的足米价
  - 空差值不在前端显示

#### 价格计算示例
以 #826 冷面平纹为例（假设空差为91）：
项目	成本价	计算过程	显示价格
白色	¥5.10	5.10 × (100/91) × 1.1	¥6.16
彩色	¥5.30	5.30 × (100/91) × 1.1	¥6.40
⚙️ 如何修改利润率
打开 lib/config/pricing.ts，修改第7行：
// 修改此值：10% = 0.1, 15% = 0.15, 20% = 0.2export const DEFAULT_PROFIT_MARGIN = 0.1;
保存后刷新页面，所有价格会自动按新利润率重新计算。

### 版布价 

- ✅ 版布价在产品数据里面是成本价，网站显示要在这个基础上加上默认人工费（已实现）
- ✅ 默认人工费属于一个变量（已实现配置：`lib/config/pricing.ts` 中的 `DEFAULT_SAMPLE_LABOR_FEE`，默认为2元）

#### 版布价计算实现：
- **公式：** 显示版布价 = 版布成本价 + 人工费
- **默认人工费：** 2元（可在配置文件中修改）
- **示例：** 成本价7元 + 人工费2元 = 显示价格¥9.00

### 最新报价

- ✅ 把头部导航条的"新品上架"改为"最新报价"（已实现）
- ✅ 页面是一个表格，显示列名为：编号、品名名称、幅宽、克重、成份、白色价格、彩色价格、版布价（已实现）
- ✅ 表格需要体现数据分类，在同类产品的第一条上面增加一条通栏分类标题行（已实现）

#### 最新报价功能详情：
- **页面路径：** `/quotation`
- **功能特性：**
  - 显示所有产品的完整报价信息
  - 支持按编号、品名、成分搜索
  - 支持按分类筛选（天丝、绣花底布、棉布）
  - 实时显示计算后的价格（足米价+利润率）
  - 版布价显示成本价+人工费
  - **分类分组显示**：产品按分类分组，每个分类有通栏标题行
    - 分类标题行背景色：浅棕色
    - 显示分类名称和产品数量
    - 分类标题后紧跟该分类的所有产品
- **导航更新：**
  - 桌面端导航：已更新
  - 移动端导航：已更新 

- ✅ 表格头部不固定（已实现：表格头部正常滚动，不使用sticky定位）
- ✅ 分类标题栏点击可以收起同类产品数据 再次点击展开（已实现）

#### 最新报价表格交互功能：
- **分类折叠/展开：**
  - 分类标题行可点击，支持折叠/展开该分类下的所有产品
  - 展开状态：显示向下箭头图标（ChevronDown）
  - 折叠状态：显示向右箭头图标（ChevronRight）
  - 鼠标悬停时背景色加深，提供视觉反馈
  - 支持同时折叠多个分类
  - 使用 React State（Set<string>）管理折叠状态

### 代客找版

- ✅ 把头部导航条的促销活动 改为代客找版（已实现）

- ✅ 页面是代客找版的服务介绍，包含三部分 内容需要拓写，增加数据，要更加可信，文笔要亲切（已实现）

- ✅ 第一部分，讲述什么人需要代客找版：列举三种需要服务的人群（已实现）
- ✅ 第二部分，为什么选择我们：列举三个理由，1、本地面料批发商资源 比别人低 2、多年找布经验 比别人快 3、中大市场面料丰富齐全 比别人多（已实现）
- ✅ 第三部分，如何开始，要么手机微信联系我们要么把要求写在纸上和样品一同寄到某个地址（已实现）

#### 代客找版功能详情：
- **页面路径：** `/fabric-sourcing`
- **导航更新：**
  - 桌面端导航：已更新（促销活动 → 代客找版）
  - 移动端导航：已更新（促销活动 → 代客找版）
- **页面内容：**
  - **第一部分 - 服务人群：**
    - 外地客户：节省差旅费用，避免人生地不熟
    - 新手创业者：避免走弯路，获得专业建议
    - 赶时间的客户：当天发布需求次日反馈
  - **第二部分 - 核心优势：**
    - 💰 比别人低：本地批发商资源，价格低10%-20%
    - ⚡ 比别人快：8年找布经验，2小时找到3-5个选择
    - 📦 比别人多：中大市场5000+档口，10万+款面料
  - **第三部分 - 联系方式：**
    - 方式一：电话/微信直接联系
    - 方式二：邮寄样品+需求说明
    - 服务流程：提交需求 → 市场寻找 → 反馈结果 → 确认下单
- **设计特点：**
  - 文笔亲切可信，贴近实际场景
  - 真实案例和数据支撑，增强可信度
  - 清晰的服务流程说明（2-3天完成）
  - 醒目的CTA区域引导用户联系

### 新品上线

- 把头部导航条最左边 加入新品上线 
- 新品上线页面，展示所有最新上架的信息流
- 信息读取配置data/new-product.json的数组 结构如下
{
  "title": "新品上线",
  "description": "展示所有最新上架的产品信息",
  "updateTime": "昨天",
  "photo": [
    "/new-product-1.jpg",
    "/new-product-2.jpg",
    "/new-product-3.jpg"
  ]
}
