# å›¾ç‰‡ç®¡ç†æŒ‡å—

## å›¾ç‰‡å‘½åè§„èŒƒ

æ‰€æœ‰äº§å“å›¾ç‰‡æŒ‰ç…§ç»Ÿä¸€çš„å‘½åè§„èŒƒï¼Œä¾¿äºç®¡ç†å’Œè¯†åˆ«ï¼š

### æ ¼å¼
```
äº§å“ç¼–å·_å›¾ç‰‡åºå·.jpg
```

### ç¤ºä¾‹
- `801_1.jpg` - 801#æ¶¤å¤©ä¸ï¼ˆæ›²å¤©ä¸ï¼‰ä¸»å›¾
- `801_2.jpg` - 801#æ¶¤å¤©ä¸ï¼ˆæ›²å¤©ä¸ï¼‰ç¬¬2å¼ å›¾
- `802_1.jpg` - 802#å¤©ä¸ä»™å¥³æ¡ä¸»å›¾
- `901_1.jpg` - 901#2060æ´—æ°´ç«¹èŠ‚ä¸»å›¾

## å›¾ç‰‡å­˜å‚¨æ–¹æ¡ˆ

### æ–¹æ¡ˆï¼šæœ¬åœ°å­˜å‚¨ï¼ˆæ¨èç”¨äºå¼€å‘æµ‹è¯•ï¼‰

**ä½ç½®ï¼š** `public/images/products/`

**æ–‡ä»¶ç»“æ„ï¼š**
```
public/
â””â”€â”€ images/
    â”œâ”€â”€ products/
    â”‚   â”œâ”€â”€ 801_1.jpg
    â”‚   â”œâ”€â”€ 801_2.jpg
    â”‚   â”œâ”€â”€ 802_1.jpg
    â”‚   â””â”€â”€ ...
    â””â”€â”€ banners/
        â”œâ”€â”€ banner_1.jpg
        â”œâ”€â”€ banner_2.jpg
        â””â”€â”€ banner_3.jpg
```

**äº§å“æ•°æ®ä¸­çš„é…ç½®ï¼š**
```json
{
  "id": "prod-801",
  "productNo": "801#",
  "name": "æ¶¤å¤©ä¸ï¼ˆæ›²å¤©ä¸ï¼‰",
  "images": [
    "/images/products/801_1.jpg",
    "/images/products/801_2.jpg"
  ]
}
```

### æ›¿æ¢å›¾ç‰‡æ¼”ç¤º

âœ… å‡†å¤‡å›¾ç‰‡ â†’ æŒ‰ç…§å‘½åè§„èŒƒå‘½åï¼š826_1.jpg, 826_2.jpg, 826_3.jpg
âœ… æ”¾å…¥ç›®å½• â†’ å¤åˆ¶åˆ° public/images/products/ ç›®å½•
âœ… è¿è¡ŒåŒæ­¥ â†’ æ‰§è¡Œ node scripts/manage-images.js sync
âœ… è‡ªåŠ¨å…³è” â†’ è„šæœ¬è‡ªåŠ¨æ›´æ–° data/products.json
ç°åœ¨ #826 äº§å“åœ¨ç½‘ç«™ä¸Šå°±èƒ½æ­£å¸¸æ˜¾ç¤ºæ‚¨ä¸Šä¼ çš„è¿™3å¼ å›¾ç‰‡äº†ï¼åˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°æ•ˆæœã€‚
ğŸ’¡ æç¤ºï¼š
å›¾ç‰‡æ–‡ä»¶è¾ƒå¤§ï¼ˆ4-6MBï¼‰ï¼Œå»ºè®®ä½¿ç”¨å›¾ç‰‡å‹ç¼©å·¥å…·ï¼ˆå¦‚ TinyPNGï¼‰ä¼˜åŒ–åå†ä¸Šä¼ ï¼Œå¯ä»¥ï¼š
å‡å°‘åŠ è½½æ—¶é—´
èŠ‚çœå¸¦å®½
æå‡ç”¨æˆ·ä½“éªŒ
è¿™å°±æ˜¯æ•´ä¸ªå›¾ç‰‡ç®¡ç†çš„æµç¨‹ï¼Œéå¸¸ç®€å•ï¼ä»¥åæ·»åŠ ä»»ä½•äº§å“çš„å›¾ç‰‡éƒ½æŒ‰è¿™ä¸ªæ–¹æ³•æ“ä½œå³å¯ã€‚



## å›¾ç‰‡è§„æ ¼è¦æ±‚

### äº§å“å›¾ç‰‡
- **æ ¼å¼ï¼š** JPG/JPEG æˆ– WebP
- **å°ºå¯¸ï¼š** 
  - æœ€å°ï¼š800x800px
  - æ¨èï¼š1200x1200px
  - æœ€å¤§ï¼š2000x2000px
- **å®½é«˜æ¯”ï¼š** 1:1ï¼ˆæ­£æ–¹å½¢ï¼‰
- **æ–‡ä»¶å¤§å°ï¼š** ä¸è¶…è¿‡ 500KB
- **èƒŒæ™¯ï¼š** å»ºè®®çº¯ç™½è‰²æˆ–æµ…è‰²èƒŒæ™¯

### è½®æ’­å›¾
- **æ ¼å¼ï¼š** JPG/JPEG æˆ– WebP
- **å°ºå¯¸ï¼š** 1600x600px
- **å®½é«˜æ¯”ï¼š** 8:3
- **æ–‡ä»¶å¤§å°ï¼š** ä¸è¶…è¿‡ 800KB

## å›¾ç‰‡æ›´æ–°æµç¨‹

### æ–¹æ³•ä¸€ï¼šç›´æ¥ä¿®æ”¹ JSON æ–‡ä»¶ï¼ˆæ¨èï¼‰

1. ä¸Šä¼ æ–°å›¾ç‰‡åˆ°å›¾ç‰‡å­˜å‚¨ä½ç½®
2. æ‰“å¼€ `data/products.json` æ–‡ä»¶
3. æ‰¾åˆ°å¯¹åº”äº§å“çš„ `images` å­—æ®µ
4. æ›´æ–°å›¾ç‰‡é“¾æ¥
5. ä¿å­˜æ–‡ä»¶
6. é‡å¯å¼€å‘æœåŠ¡å™¨æˆ–é‡æ–°éƒ¨ç½²

**ç¤ºä¾‹ï¼š**
```json
{
  "id": "prod-801",
  "productNo": "801#",
  "name": "æ¶¤å¤©ä¸ï¼ˆæ›²å¤©ä¸ï¼‰",
  "images": [
    "/images/products/801_1.jpg",  â† ä¿®æ”¹è¿™é‡Œ
    "/images/products/801_2.jpg"
  ]
}
```

### æ–¹æ³•äºŒï¼šä½¿ç”¨å›¾ç‰‡ç®¡ç†è„šæœ¬

åˆ›å»º `scripts/update-product-images.js` è„šæœ¬ï¼š

```javascript
const fs = require('fs');

// æ‰¹é‡æ›´æ–°å›¾ç‰‡
function updateProductImages() {
  const products = JSON.parse(fs.readFileSync('data/products.json', 'utf8'));
  
  products.forEach(product => {
    // æå–äº§å“ç¼–å·ï¼ˆå¦‚ï¼š801# -> 801ï¼‰
    const productNum = product.productNo.replace('#', '');
    
    // è‡ªåŠ¨è®¾ç½®å›¾ç‰‡è·¯å¾„
    product.images = [
      `/images/products/${productNum}_1.jpg`,
      `/images/products/${productNum}_2.jpg`
    ];
  });
  
  fs.writeFileSync('data/products.json', JSON.stringify(products, null, 2));
  console.log('å›¾ç‰‡é“¾æ¥æ›´æ–°å®Œæˆï¼');
}

updateProductImages();
```

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
node scripts/update-product-images.js
```

## æ‰¹é‡å›¾ç‰‡ä¸Šä¼ 

### ä½¿ç”¨é˜¿é‡Œäº‘OSSå‘½ä»¤è¡Œå·¥å…·

```bash
# å®‰è£…ossutil
# Windows: ä¸‹è½½ ossutil64.exe
# Mac: brew install ossutil

# é…ç½®
ossutil config

# æ‰¹é‡ä¸Šä¼ 
ossutil cp -r ./public/images/products/ oss://tx-fabric-bucket/products/
```

### ä½¿ç”¨å›¾åºŠæ‰¹é‡ä¸Šä¼ å·¥å…·

æ¨èå·¥å…·ï¼š
- **PicGo** - è·¨å¹³å°å›¾åºŠä¸Šä¼ å·¥å…·
- **uPic** - Macä¸“ç”¨
- **PicList** - PicGoçš„å¢å¼ºç‰ˆ

## å›¾ç‰‡ä¼˜åŒ–å»ºè®®

### 1. è‡ªåŠ¨å‹ç¼©
```bash
# å®‰è£…å‹ç¼©å·¥å…·
npm install -g imagemin-cli

# å‹ç¼©å›¾ç‰‡
imagemin public/images/products/*.jpg --out-dir=public/images/products/optimized
```

### 2. ä½¿ç”¨ Next.js Image ç»„ä»¶
é¡¹ç›®å·²ç»ä½¿ç”¨ `next/image` ç»„ä»¶ï¼Œè‡ªåŠ¨ä¼˜åŒ–ï¼š
- è‡ªåŠ¨è°ƒæ•´å°ºå¯¸
- æ‡’åŠ è½½
- WebPæ ¼å¼è½¬æ¢

### 3. é…ç½®å›¾ç‰‡åŸŸåç™½åå•
åœ¨ `next.config.js` ä¸­é…ç½®ï¼š
```javascript
module.exports = {
  images: {
    domains: [
      'images.unsplash.com',
      'your-bucket.oss-cn-shenzhen.aliyuncs.com',
      'i.loli.net'
    ],
  },
}
```

## å¿«é€Ÿå‚è€ƒ

### äº§å“ç¼–å·å¯¹ç…§è¡¨

| ç³»åˆ— | ç¼–å·èŒƒå›´ | æ•°é‡ |
|------|---------|------|
| å¤©ä¸ç³»åˆ— | 801# - 832# | 28ä¸ª |
| ç»£èŠ±åº•å¸ƒ | 601# - 606# | 6ä¸ª |
| æ£‰å¸ƒç³»åˆ— | 901# - 914# | 13ä¸ª |

### å¸¸è§é—®é¢˜

**Q: å›¾ç‰‡ä¸æ˜¾ç¤ºæ€ä¹ˆåŠï¼Ÿ**
A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. å›¾ç‰‡è·¯å¾„æ˜¯å¦æ­£ç¡®
2. å›¾ç‰‡æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. å›¾ç‰‡åŸŸåæ˜¯å¦åœ¨ç™½åå•ä¸­
4. å¼€å‘æœåŠ¡å™¨æ˜¯å¦é‡å¯

**Q: å¦‚ä½•æ›´æ¢è½®æ’­å›¾ï¼Ÿ**
A: ä¿®æ”¹ `data/banners.json` æ–‡ä»¶ä¸­çš„ `image` å­—æ®µ

**Q: å¦‚ä½•æ·»åŠ å¤šå¼ äº§å“å›¾ï¼Ÿ**
A: åœ¨ `images` æ•°ç»„ä¸­æ·»åŠ æ›´å¤šå›¾ç‰‡URLï¼š
```json
"images": [
  "/images/products/801_1.jpg",
  "/images/products/801_2.jpg",
  "/images/products/801_3.jpg"  â† æ–°å¢
]
```

## è‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼ˆè¿›é˜¶ï¼‰

### åˆ›å»ºå›¾ç‰‡ç®¡ç†è„šæœ¬
ä¿å­˜ä¸º `scripts/manage-images.js`ï¼š

```javascript
const fs = require('fs');
const path = require('path');

// æ‰«ææœ¬åœ°å›¾ç‰‡å¹¶è‡ªåŠ¨æ›´æ–°JSON
function syncProductImages() {
  const productsData = JSON.parse(fs.readFileSync('data/products.json', 'utf8'));
  const imageDir = 'public/images/products';
  
  if (!fs.existsSync(imageDir)) {
    fs.mkdirSync(imageDir, { recursive: true });
  }
  
  productsData.forEach(product => {
    const productNum = product.productNo.replace('#', '');
    const images = [];
    
    // æŸ¥æ‰¾æ‰€æœ‰è¯¥äº§å“çš„å›¾ç‰‡
    for (let i = 1; i <= 5; i++) {
      const imagePath = path.join(imageDir, `${productNum}_${i}.jpg`);
      if (fs.existsSync(imagePath)) {
        images.push(`/images/products/${productNum}_${i}.jpg`);
      }
    }
    
    if (images.length > 0) {
      product.images = images;
    }
  });
  
  fs.writeFileSync('data/products.json', JSON.stringify(productsData, null, 2));
  console.log(`âœ“ å·²åŒæ­¥ ${productsData.length} ä¸ªäº§å“çš„å›¾ç‰‡`);
}

syncProductImages();
```

**ä½¿ç”¨ï¼š**
```bash
# 1. å°†å›¾ç‰‡æŒ‰å‘½åè§„èŒƒæ”¾å…¥ public/images/products/
# 2. è¿è¡Œè„šæœ¬è‡ªåŠ¨æ›´æ–°JSON
node scripts/manage-images.js
```

---

**ç»´æŠ¤è€…æç¤ºï¼š** 
- å®šæœŸæ¸…ç†æœªä½¿ç”¨çš„å›¾ç‰‡
- ä¿æŒå‘½åè§„èŒƒä¸€è‡´
- åšå¥½å›¾ç‰‡å¤‡ä»½
- å»ºè®®ä½¿ç”¨CDNåŠ é€Ÿå›¾ç‰‡åŠ è½½

åŸºæœ¬è¯­æ³•
Bash



è¿è¡Œ
node scripts/process-images.js <æºç›®å½•> <è¾“å‡ºç›®å½•> [å®½åº¦] [é«˜åº¦] [è´¨é‡]
ç¤ºä¾‹å‘½ä»¤
åªå‹ç¼©å›¾ç‰‡ï¼Œä¸è°ƒæ•´å°ºå¯¸ï¼š

Bash



è¿è¡Œ
node scripts/process-images.js public/images/about public/images/aboutus
è°ƒæ•´å›¾ç‰‡å°ºå¯¸ä¸º 1600x600pxï¼š

Bash



è¿è¡Œ
node scripts/process-images.js public/images/about public/images/aboutus 1600 600
è°ƒæ•´å°ºå¯¸å¹¶è®¾ç½®è´¨é‡ï¼š

Bash



è¿è¡Œ
node scripts/process-images.js public/images/about public/images/aboutus 1600 600 90
ä½¿ç”¨ npm å¿«æ·å‘½ä»¤
Bash



è¿è¡Œ
npm run process-images -- public/images/about public/images/aboutus 1600 600
å‚æ•°è¯´æ˜
æºç›®å½• - å¿…éœ€ï¼Œè¾“å…¥å›¾ç‰‡ç›®å½•è·¯å¾„
è¾“å‡ºç›®å½• - å¿…éœ€ï¼Œè¾“å‡ºå›¾ç‰‡ç›®å½•è·¯å¾„
å®½åº¦ - å¯é€‰ï¼Œç›®æ ‡å›¾ç‰‡å®½åº¦
é«˜åº¦ - å¯é€‰ï¼Œç›®æ ‡å›¾ç‰‡é«˜åº¦
è´¨é‡ - å¯é€‰ï¼Œå›¾ç‰‡è´¨é‡ 1-100ï¼Œé»˜è®¤ä¸º 80